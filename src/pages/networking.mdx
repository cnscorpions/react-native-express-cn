import WebPlayer from '../components/WebPlayer'
import example from '../examples/networking'

React Native中的`Networking`是建立在两个API之上，`fetch`和`XMLHttpRequest`。这两个API的设计都是为了与浏览器API兼容，因此：

- web开发人员不必学习一种新的网络请求方式。
- 在这些基础上构建的库在React Native中发挥了预期的功能。

直接使用`fetch`API而非`XMLHttpRequest`，因为前者比后者更简单，更高级。如果你的网络请求需求更高级（multi-part form请求等），你可能会想要使用一个抽象过的库。

常见的网络请求库如`axios`和`superagent`仍然可以在React Native中工作。

# Fetch API

让我们来看看`fetch`，它很容易使用，在React Native中开箱即用的。Fetch API是基于promise的，也就是说我们可以使用`async/await`。

## **`const response = await fetch(uri)`**

向`uri`发送`GET`请求，返回一个代表`Response`对象的promise。要访问返回的数据，你必须await `response.text()`或`response.json()`。

## **`const json = await response.json()`**

将响应体异步解析为JSON格式。

## **`const text = await response.text()`**

以文本格式获取响应体。

## 就是这样！

我们开始使用`fetch`! 如果你想在自定义的请求头或`POST`请求中使用fetch，请阅读更多关于API的信息[在MDN](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch)。

# Example

我们将获取一个帖子列表，并在ScrollView中显示它们。由于`fetch`是异步的，所以我们的应用在加载时可能没有数据。我们应该准备好在数据加载时显示一个`ActivityIndicator`（loading动画）。我们还应该准备好在获取数据失败时显示一个错误信息。

*注意：如果你使用的是旧版浏览器，fetch可能无法使用。*

<WebPlayer {...example} />
